Метод регистрации пользователя
Метод register объекта auth раздела citizens предназначен для создания профиля нового пользователя ЕМП.

Входные данные:

|№| Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1| msisdn| +| Номер мобильного телефона пользователя|
|2| code| +| Код подтверждения регистрации|
|3| email| -| Адрес электронной почты|
|4| password|+| Пароль|
|5|name|-|Имя|
|6|surname|-|Фамилия|
|7|patronymic|-|Отчество|

При успешной регистрации ответ содержит идентификатор сессии пользователя.

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/register

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"code":84834,
"msisdn": "70000000033",
"email": "vs@altarix.ru",
"password":"123321"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": "a8b0d4bb4fc5c8b1b96f65d28cb86c1f"
}

Редактировать эту секцию
Метод регистрации кода для подтверждения действия
Метод registerCode объекта auth раздела citizens предназначен для получения кода на создание профиля. Данный метод отправляет на указанный номер смс с кодом подтверждения: "Для подтверждения номера телефона используйте код: *****".

Входные данные:

|№| Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1| msisdn| +| Номер мобильного телефона пользователя|
|2| ttl| +| Время жизни кода (Секунды)|
|3| message| +| Тело сообщения|
|4|subject|-|Тема сообщения|
|5|type|-|Тип действия. По умолчанию: register|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/registerCode

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"msisdn": "70000000033",
"ttl": "150",
"message": "Для подтверждения номера телефона используйте код: %code%"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": true
}

Редактировать эту секцию
Метод сброса пароля
Метод resetpassword объекта auth раздела citizens предназначен для сброса пароля пользователя.

Входные данные:

|№| Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1| code| +| Код подтверждения|
|2| newpwd| + |Новый пароль|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/resetpassword

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"code":88659,
"newpwd":"12345"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": true
}

Редактировать эту секцию
Метод восстановления пароля по email
Метод recoverybyemail объекта auth раздела citizens предназначен для отправления на адрес электронной почты, указанной в профиле пользователя, сгенерированного цифрового кода для восстановления пароля. Данный метод отправляет письмо на указанный адрес электронной почты с кодом для восстановления пароля: "Для изменения пароля используйте код: *****".

Входные данные:

|№| Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1| email| +| Адрес электронной почты пользователя|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/recoverybyemail

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"email":"vs@altarix.ru"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": true
}

Редактировать эту секцию
Метод восстановления пароля по номеру телефона
Метод recoverybymsisdn объекта auth раздела citizens предназначен для отправления сгенерированного цифрового кода для восстановления пароля на номер телефона, указанный при регистрации пользователя в системе. Метод отправляет гражданину на указанный номер мобильного телефона sms с кодом для восстановления пароля: "Для изменения пароля используйте код: *****".

Входные данные:

|№| Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1| msisdn| + |Номер телефона пользователя|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/recoverybymsisdn

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"msisdn":"70000000033"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": true
}

Редактировать эту секцию
Метод авторизации по номеру мобильного телефона
Метод loginbymsisdn объекта auth раздела citizens предназначен для аутентификации пользователя сервисов ЕМП по номеру мобильного телефона, определенному или явно указанному при регистрации.

Входные данные:

|№| Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1| msisdn| +| Номер мобильного телефона пользователя|
|2| password| +| Пароль пользователя|
|3|md5|-|Хеш-сумма(по умолчанию false)|

Выходные данные:
|№| Название поля| Обязательное| Описание поля|
|1|session_id|+|Идентификатор сессии|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/loginbymsisdn

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"msisdn":"70000000022",
"password":"123321"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": "56256d46cc747660bffd36e73b301f3c"
}

Редактировать эту секцию
Метод авторизации по адресу электронной почты
Метод loginbyemail объекта auth раздела citizens предназначен для аутентификации пользователя по адресу электронной почты, указанной в профиле пользователя и, впоследствии, подтвержденной. В результате использования данный метод возвращает в поле result идентификатор сессии.

Входные данные:

|№ |Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1| email| +| Адрес электронной почты пользователя|
|2| pwd| +| Пароль пользователя|
|3| md5| -| Хеш-сумма(по умолчанию false)|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/loginbyemail

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"email":"70000000022@altarix.ru",
"pwd":"123321"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": "419fc80813a2e031bda8f1f596f9c111"
}

Редактировать эту секцию
Метод авторизации по коду
Метод authorizebycode объекта auth раздела citizens предназначен для аутентификации пользователя по коду. В результате использования данный метод возвращает в поле result идентификатор сессии.

Входные данные:

|№ |Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1|token |+|Токен-ключ|
|2|msisdn |+|Номер телефона|
|3|code|+|Код|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/authorizebycode

Тело запроса:

{"token":"1929433a48f549bcbde6f03c105912ff","msisdn":"70000000033","code":"27332"}

Пример ответа:

{"errorCode": 0, "errorMessage": "", "result": "2c0fac250c61ee6d2b2e7d86d718a1fc"}

Редактировать эту секцию
Метод выхода из системы
Метод logout объекта auth раздела citizens предназначен для выхода пользователя сервисов ЕМП из системы.

Входные данные:

|№ |Название поля| Обязательное| Описание поля|
|--|--|--|--|
|1| session_id| + |Идентификатор сессии|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/logout

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"session_id":"419fc80813a2e031bda8f1f596f9c111"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": true
}

Редактировать эту секцию
Метод отправки кода верификации
Метод sendcode объекта auth раздела citizens вызывает отправку кода, предназначенного для верификации действий пользователя. В поле result данный метод возвращает код подтверждения действия.

Входные данные:

|№ |Название поля |Обязательное| Описание поля|
|--|--|--|--|
|1| session_id| +| Идентификатор сессии|
|2| length| -| Длина кода (в символах, по умолчанию 5)|
|3| ttl |-| Время действия кода (в секундах, по умолчанию 300)|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/sendcode

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"session_id":"f07a05aa56664e9d389d39644b45cb0d",
"data":"123-123-123 99",
"ttl":300,
"length":5
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": "84476"
}

Редактировать эту секцию
Метод проверки кода верификации
Метод checkcode объекта auth раздела citizens предназначен для проверки соответствия введенного пользователем кода высланному.

Входные данные:

|№ |Название поля| Обязательное |Описание поля|
|--|--|--|--|
|1| session_id| +| Идентификатор сессии|
|2| code| +| Код подтверждения|
|3|data|+| Содержит данные, характеризующие пользователя. Например email, msisdn или СНИЛС|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/checkcode

Тело запроса:

{
"token":"b6aab5aa8d1649e69b3de19a62709742",
"session_id":"f07a05aa56664e9d389d39644b45cb0d",
"data":"123-123-123 99",
"code":"84476"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": true
}

Редактировать эту секцию
Метод регистрации нового пользователя без кода подтверждения
Метод registerwoconfirmобъекта auth раздела citizens предназначен для регистрации нового пользователя ЕМП без кода подтверждения (напрямую)

Входные данные:

|№ |Название поля| Обязательное |Описание поля|
|--|--|--|--|
|1| token| +| Токен-ключ - строка, 32 символа|
|2| msisdn| +| Номер мобильного телефона в международном формате|
|3| password| +| Проль - строка, 5-32 символа|
|4| email| -| адрес электронной почты|
|5| name| -| Имя|
|6| surname| -| Фамилия|
|7| patronymic| -| Отчество|

Пример использования метода
Адрес:

http://api.emp.msk.ru:8090/json/v1.0/citizens/auth/registerwoconfirm

Тело запроса:

{
"token": "b0fb2b901a9f4317b8fdbcfc666904cc",
"msisdn": "70000002122",
"password": "123456",
"email": "test@test.test",
"name": "TestNameUser",
"surname": "TestSurnameUser",
"patronymic": "TestPatronymicUser"
}

Пример ответа:

{
"errorCode": 0,
"errorMessage": "",
"result": "a8b0d4bb4fc5c8b1b96f65d28cb86c1f"
}
